<!DOCTYPE html>
<div th:fragment="content">
  <div class="modal-card modal-card--medium">
    <h3 th:text="'Thanh toán - Bàn ' + ${tableId}">Thanh toán</h3>

    <div th:if="${hoaDon != null}">
      <table class="modal-table">
        <thead>
          <tr><th>Tên món</th><th>Số lượng</th><th>Đơn giá</th><th>Thành tiền</th></tr>
        </thead>
        <tbody>
          <tr th:each="ct : ${hoaDon.chiTietHoaDons}">
            <td th:text="${ct.thucDon.tenMon}">Món</td>
            <td class="text-center" th:text="${ct.soLuong}">0</td>
            <td class="text-right" th:text="${#numbers.formatDecimal(ct.giaTaiThoiDiemBan,0,'POINT',0,'COMMA')}">0</td>
            <td class="text-right" th:text="${#numbers.formatDecimal(ct.thanhTien,0,'POINT',0,'COMMA')}">0</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="3" class="text-right"><strong>TỔNG:</strong></td>
            <td class="text-right"><strong th:text="${#numbers.formatDecimal(hoaDon.tongTien,0,'POINT',0,'COMMA')}">0</strong></td>
          </tr>
        </tfoot>
      </table>

      <div class="modal-form">
        <div class="form-group">
          <label>Tiền khách đưa</label>
          <input type="text"
                 id="tienKhach"
                 inputmode="numeric"
                 autocomplete="off"
                 th:value="${hoaDon != null && hoaDon.tongTien != null ? #numbers.formatDecimal(hoaDon.tongTien,0,'POINT',0,'COMMA') : ''}" />
        </div>
      </div>
      <label class="modal-check"><input type="checkbox" id="printInvoice" /> Có in hóa đơn không</label>
      <div class="modal-actions">
        <button type="button" class="btn btn-sm btn-primary" th:onclick="|submitPayment(${tableId})|">Xác nhận thanh toán</button>
        <button type="button" class="btn btn-sm btn-secondary" onclick="closeModal()">Hủy</button>
      </div>
    </div>
    <div th:if="${hoaDon == null}">
      <p class="modal-hint">Không có hóa đơn để thanh toán.</p>
      <div class="modal-actions">
        <button type="button" class="btn btn-sm btn-secondary" onclick="closeModal()">Đóng</button>
      </div>
    </div>
  </div>
</div>
