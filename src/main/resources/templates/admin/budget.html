<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
  <div th:fragment="content" class="content-wrapper">
    <h1>Quản lý ngân sách</h1>

    <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
    <div th:if="${error}" class="alert alert-error" th:text="${error}"></div>

    <form method="get" class="action-bar budget-filter">
      <div class="form-row budget-filter-row">
        <div class="form-group">
          <label>Từ ngày</label>
          <input type="date" name="from" th:value="${#dates.format(from,'yyyy-MM-dd')}" />
        </div>
        <div class="form-group">
          <label>Đến ngày</label>
          <input type="date" name="to" th:value="${#dates.format(to,'yyyy-MM-dd')}" />
        </div>
      </div>
      <div class="form-actions">
        <button class="btn btn-primary btn-sm" type="submit">Xem</button>
        <a th:href="@{/admin/budget}" class="btn btn-sm btn-cancel">Reset</a>
      </div>
    </form>

    <table class="data-table report-table">
      <thead>
        <tr>
          <th>Ngày</th>
          <th class="text-right">Thu</th>
          <th class="text-right">Chi</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="row : ${thuChiList}">
          <td th:text="${row.ngay}"></td>
          <td class="text-right" th:text="${#numbers.formatDecimal(row.thu,0,'COMMA',0,'POINT')}"></td>
          <td class="text-right" th:text="${#numbers.formatDecimal(row.chi,0,'COMMA',0,'POINT')}"></td>
        </tr>
        <tr th:if="${thuChiList == null || thuChiList.isEmpty()}">
          <td colspan="3" class="text-center text-muted">Chưa có dữ liệu</td>
        </tr>
      </tbody>
    </table>

    <div class="form-box" style="margin-top:16px;">
      <h3>Thêm chi tiêu</h3>
      <form th:action="@{/admin/budget/expense}" method="post" th:object="${chiTieuForm}" novalidate>
        <div class="form-row">
          <div class="form-group">
            <label>Ngày</label>
            <input type="date" th:field="*{ngayChi}" />
            <div class="field-error" th:if="${#fields.hasErrors('ngayChi')}" th:errors="*{ngayChi}"></div>
          </div>
          <div class="form-group" style="flex:1;">
            <label>Khoản chi</label>
            <input th:field="*{tenKhoanChi}" />
            <div class="field-error" th:if="${#fields.hasErrors('tenKhoanChi')}" th:errors="*{tenKhoanChi}"></div>
          </div>
          <div class="form-group">
            <label>Số tiền</label>
            <input type="number" min="1" th:field="*{soTien}" />
            <div class="field-error" th:if="${#fields.hasErrors('soTien')}" th:errors="*{soTien}"></div>
          </div>
        </div>
        <div class="form-actions">
          <button class="btn btn-primary btn-sm" type="submit">Lưu</button>
          <a th:href="@{/admin/budget}" class="btn btn-sm btn-cancel">Hủy</a>
        </div>
      </form>
    </div>
  </div>
</body>
</html>
